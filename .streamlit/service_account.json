# json_to_toml_for_streamlit.py
import json
p = ".streamlit/service_account.json"  # ruta donde guardaste el JSON nuevo
with open(p, "r", encoding="utf-8") as f:
    obj = json.load(f)

# Convertir private_key: reemplazar saltos reales por \n
pk = obj.get("private_key", "").replace("\n", "\\n")
print("[gcp_service_account]")
for k, v in obj.items():
    if k == "private_key":
        print(f'private_key = "{pk}"')
    else:
        sval = str(v).replace('"', '\\"')
        print(f'{k} = "{sval}"')
